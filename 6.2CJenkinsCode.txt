pipeline{
    agent any
    environment {
        DIRECTORY_PATH= "jenkins/SIT753/5.1P"
        TESTING_ENVIRONMENT= "5.1P Test Environment"
        PRODUCTION_ENVIRONMENT= "5.1P Prod Environment"
    }
    stages{
        stage('Build'){
            steps{
                echo "test"
            }
        }
        stage('Unit and Integration Tests'){
            steps{
                echo "complete"
            }
            post{
    	        success{
        		    mail to: "caitlinparker98@gmail.com",
        	        subject: "Unit and Integration Tests Status",
        		    body: "Tests completed successfully.",
                    attachlog: true
    	        }
                failure{
                    mail to: "caitlinparker98@gmail.com",
        	        subject: "Unit and Integration Tests Status",
        		    body: "Unit and integration tests have failed."
                    attachlog: true
                }
    		}
        }
        stage('Code Analysis'){
            steps{
                echo "complete"
            }
        }
        stage('Security Scan'){
            steps{
                echo "complete"
            }
            post{
    	        success{
        		    mail to: "caitlinparker98@gmail.com",
        	        subject: "Security Scan",
        		    body: "Security scan completed successfully."
                    attachlog: true
    	        }
                failure{
                    mail to: "caitlinparker98@gmail.com",
        	        subject: "Security Scan",
        		    body: "The security scan has failed."
                    attachlog: true
                }
    		}
        }
        stage('Deploy to Staging'){
            steps{
                echo "complete"
            }
        }
        stage('Integration Tests on Staging'){
            steps{
                echo "complete"
            }
        }
	stage('Deploy to Production'){
            steps{
                echo "complete"
            }
        }
    }
}
